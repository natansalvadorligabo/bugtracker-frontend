<div class="h-screen w-auto">
  <div class="min-h-screen">
    <div class="flex justify-between items-center mb-6 px-6 pt-6">
      <h1 class="text-3xl font-semibold text-gray-900">Gerenciar Categorias</h1>

      @if (isAdmin) {
      <button
        mat-raised-button
        color="primary"
        (click)="createCategory()"
        class="flex items-center gap-2"
      >
        <mat-icon>add</mat-icon>
        Nova Categoria
      </button>
      }
    </div>

    <div class="px-6">
      <mat-card>
        <mat-card-content>
      @if (isLoading) {
      <div class="flex justify-center items-center py-12">
        <div class="text-center flex flex-col items-center">
          <mat-progress-spinner
            diameter="40"
            mode="indeterminate"
            color="primary"
          ></mat-progress-spinner>
          <p class="text-gray-600 mt-3 text-sm">Carregando categorias...</p>
        </div>
      </div>
      } @else if (categories.length === 0) {
      <div class="text-center py-12">
        <mat-icon class="text-gray-400 text-6xl mb-4">category</mat-icon>
        <h3 class="text-xl font-medium text-gray-900 mb-2">Nenhuma categoria encontrada</h3>
        <p class="text-gray-600 mb-6">Comece criando sua primeira categoria de tickets.</p>
        @if (isAdmin) {
        <button
          mat-raised-button
          color="primary"
          (click)="createCategory()"
          class="flex items-center gap-2 mx-auto"
        >
          <mat-icon>add</mat-icon>
          Nova Categoria
        </button>
        }
      </div>
      } @else {
      <div class="overflow-x-auto">
        <table mat-table [dataSource]="categories" class="w-full">

          <!-- Coluna Descrição -->
          <ng-container matColumnDef="description">
            <th mat-header-cell *matHeaderCellDef class="text-left font-semibold">Descrição</th>
            <td mat-cell *matCellDef="let category" class="py-4">
              <div class="flex items-center">
                <mat-icon class="text-gray-500 mr-3">category</mat-icon>
                <span class="text-gray-900 font-medium">{{ category.description }}</span>
              </div>
            </td>
          </ng-container>

          <!-- Coluna Ações -->
          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef class="text-right font-semibold">Ações</th>
            <td mat-cell *matCellDef="let category" class="text-right py-4">
              @if (isAdmin) {
              <div class="flex justify-end gap-2">
                <button
                  mat-icon-button
                  color="primary"
                  (click)="editCategory(category.ticketCategoryId)"
                  matTooltip="Editar categoria"
                >
                  <mat-icon>edit</mat-icon>
                </button>
                <button
                  mat-icon-button
                  color="warn"
                  (click)="deleteCategory(category)"
                  matTooltip="Excluir categoria"
                >
                  <mat-icon>delete</mat-icon>
                </button>
              </div>
              } @else {
              <span class="text-gray-500 text-sm">Apenas visualização</span>
              }
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="hover:bg-gray-50 transition-colors"></tr>
        </table>
      </div>
      }
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
